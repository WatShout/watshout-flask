<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <style>

        #gpx {
            height: 400px;
            width: 400px;

        }



    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>

        let submitFile = () => {

            let text = document.getElementById(`gpx`).value.replace(/(\r\n|\n|\r)/gm,"");
            console.log(text);

            $.ajax({
                type : "POST",
                url : "/gpx/convert/",
                headers: {
                    'text': text
                },
                contentType: 'application/json;charset=UTF-8',
                success: function(result) {

                    let a = window.document.createElement(`a`);
                    a.href = window.URL.createObjectURL(new Blob([result], {type: 'text/csv'}));
                    a.download = `test.csv`;

                    document.body.appendChild(a);
                    a.click();


                }
            })
        }


    </script>

    <title>GPX to CSV</title>
</head>
<body>

<h1>GPX to CSV Converter</h1>

<h3>Please copy and paste the contents of the GPX file into the below text box (file upload will be available soon)</h3>
<textarea id="gpx" cols="40" rows="5"></textarea>

<h4>Note: sometimes chrome will try to block the download of files, just click on the icon in the top right corner to allow from this address</h4>
<input type="button" id="submit" value="submit" onclick="submitFile()" >

</body>
</html>